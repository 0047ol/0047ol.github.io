var $=mdui.$;var GITEE_USERNAME=localStorage.getItem("gitee_username");var GITEE_TOKEN=localStorage.getItem("gitee_token");var REPOSITORY_NAME=localStorage.getItem("repository_name");var REPOSITORY_PATH=localStorage.getItem("repository_path");var REPOSITORY_INITIALIZED=(localStorage.getItem("repository_initialized")=="true")?true:false;var INITIALIZE_DIALOG;var EDIT_DIALOG;var UPDATE_API_NAME="update";var NOTICE_API_NAME="notice";var EDIT_TYPE=NOTICE_API_NAME;var DEFAULT_UPDATE_LOG="eyJ2ZXJzaW9uQ29kZSI6MSwidmVyc2lvbk5hbWUiOiIxLjAuMCIsIm1pblZlcnNpb24iOjEsInRhcmdldFZlcnNpb24iOjEsInVwZGF0ZUxvZyI6Iui/meaYr+S4qua1i+ivleabtOaWsOaXpeW/l+OAgiIsImRvd25sb2FkVXJsIjoiaHR0cHM6Ly94eHh4Lnh4L3h4eCIsInVwZGF0ZVRpbWUiOjE2NjU0MDk2MjIwODV9";var DEFAULT_NOTICE_MSG="eyJ0aXRsZSI6Iua1i+ivleWFrOWRiuagh+mimCIsIm1lc3NhZ2UiOiLov5nmmK/mtYvor5XlhazlkYrnmoTlhoXlrrnjgIIiLCJqdW1wVXJsIjoiaHR0cHM6Ly94eHh4Lnh4L3h4eCIsImNhbmNlbGFibGUiOnRydWUsInVwZGF0ZVRpbWUiOjE2NjU0MDk2MjIwODV9";window.onload=function(){if(!GITEE_TOKEN||!GITEE_USERNAME){showToast("\u8bf7\u5148\u8bbe\u7f6e\u4ee4\u724c");$("#toolbar_btn_more").hide();$("#layout_main").hide();$("#layout_login").show();return}if(!REPOSITORY_NAME&&!REPOSITORY_PATH){showToast("\u5c1a\u672a\u521d\u59cb\u5316");INITIALIZE_DIALOG=new mdui.Dialog("#gitee_initialize_dialog",{history:false,modal:true});INITIALIZE_DIALOG.open();return}if(!REPOSITORY_INITIALIZED){showToast("\u521d\u59cb\u5316\u672a\u5b8c\u6210");INITIALIZE_DIALOG=new mdui.dialog({title:"\u521d\u59cb\u5316\u672a\u5b8c\u6210",content:"\u68c0\u67e5\u5230\u4e0a\u6b21\u672a\u5b8c\u6210\u521d\u59cb\u5316\uff0c\u662f\u5426\u7ee7\u7eed\u521d\u59cb\u5316\uff1f",buttons:[{text:"\u7ee7\u7eed\u521d\u59cb\u5316",onClick:function(a){initializeRepository(REPOSITORY_NAME,REPOSITORY_PATH)}}]});return}$("#toolbar_btn_more").show();$("#layout_login").hide();$("#layout_main").show();setTimeout(function(){getFiles(NOTICE_API_NAME,function(d,c){if(d){var b=Base64.decode(c.content);var a=JSON.parse(b);$("#notice_title").html(a.title);$("#notice_update_time").html(stampToDate(a.updateTime,"Y-m-d H:i:s"));$("#notice_content").html(a.message+'<div class="mdui-typo-caption-opacity mdui-m-t-1"><i class="mdui-icon material-icons">link</i>\u8df3\u8f6c\u94fe\u63a5\uff1a'+a.jumpUrl+"</div>");$("#notice_card").show()}else{if(JSON.stringify(c).indexOf("Not Found Project")!=-1){localStorage.removeItem("repository_name");localStorage.removeItem("repository_path");localStorage.removeItem("repository_initialized");showToast("\u4ed3\u5e93\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u521d\u59cb\u5316");setTimeout(function(){window.location.reload()},1000);return}showToast(JSON.stringify(c.error))}})},500);setTimeout(function(){getFiles(UPDATE_API_NAME,function(d,c){if(d){var b=Base64.decode(c.content);var a=JSON.parse(b);$("#version_title").html("V"+a.versionName+"("+a.versionCode+")");$("#version_update_time").html(stampToDate(a.updateTime,"Y-m-d H:i:s"));$("#version_content").html(a.updateLog+'<div class="mdui-typo-caption-opacity mdui-m-t-1"><i class="mdui-icon material-icons">link</i>\u4e0b\u8f7d\u94fe\u63a5\uff1a'+a.downloadUrl+"</div>");$("#version_card").show()}else{showToast(JSON.stringify(c.error))}})},1000);if(!isComputerUserAgent()){$(".mdui-drawer .mdui-list-item").attr("mdui-drawer-close",true)}};$("#gitee_initialize_btn").on("click",function(b){var c=$("#repository_name_input").val();var a=$("#repository_path_input").val();createRepository(c,a)});function createRepository(b,a){INITIALIZE_DIALOG.close();INITIALIZE_DIALOG=mdui.dialog({title:"\u8bf7\u8010\u5fc3\u7b49\u5f85",content:'<div class="mdui-valign"><div class="mdui-spinner mdui-spinner-colorful"></div><span class="mdui-m-l-1">\u6b63\u5728\u521b\u5efa\u63a5\u53e3\u4ed3\u5e93\u4e2d\u002e\u002e\u002e</span></div>',modal:true});mdui.mutation();_repository_name=b+"后台接口";$.ajax({method:"POST",url:"https://gitee.com/api/v5/user/repos",data:{access_token:GITEE_TOKEN,name:_repository_name,description:b+"的后台接口仓库，请勿删除！",has_issues:false,has_wiki:false,can_comment:false,auto_init:true,path:a,private:false},success:function(d,c,e){INITIALIZE_DIALOG.close();localStorage.setItem("repository_name",b);localStorage.setItem("repository_path",a);REPOSITORY_NAME=_repository_name;REPOSITORY_PATH=a;initializeRepository(_repository_name,a)},error:function(d){INITIALIZE_DIALOG.close();var c=JSON.parse(d.responseText);showToast(JSON.stringify(c.error));setTimeout(function(){window.location.reload()},1000);return}})}function initializeRepository(b,a){INITIALIZE_DIALOG=mdui.dialog({title:"\u8bf7\u8010\u5fc3\u7b49\u5f85",content:'<div class="mdui-valign"><div class="mdui-spinner mdui-spinner-colorful"></div><span class="mdui-m-l-1">\u6b63\u5728\u914d\u7f6e\u63a5\u53e3\u6570\u636e\u4e2d\u002e\u002e\u002e</span></div>',modal:true});mdui.mutation();createFiles("更新",b,a,UPDATE_API_NAME,DEFAULT_UPDATE_LOG,function(d,c){if(!d){showToast(JSON.stringify(c.error));setTimeout(function(){window.location.reload()},1000);return}});setTimeout(function(){createFiles("公告",b,a,NOTICE_API_NAME,DEFAULT_NOTICE_MSG,function(d,c){if(!d){showToast(JSON.stringify(c.error));setTimeout(function(){window.location.reload()},1000);return}})},500);setTimeout(function(){getFiles("README.en.md",function(d,c){if(d){removeFiles("README.en.md",c.sha,null)
}})},1000);setTimeout(function(){getFiles("README.md",function(d,c){if(d){removeFiles("README.md",c.sha,null)}});INITIALIZE_DIALOG.close();localStorage.setItem("repository_initialized",true);mdui.dialog({title:"\u521d\u59cb\u5316\u5b8c\u6210",content:'<img src="https://previewengine.zohopublic.com.cn/image/WD/847uscee975e76df7479b85b320af0ba4adec" style="height: 200px;"><span>\u8bf7\u524d\u5f80\u0047\u0069\u0074\u0065\u0065\u5c06\u4ed3\u5e93\u6743\u9650\u8bbe\u7f6e\u4e3a\u516c\u5f00\u72b6\u6001</span>',buttons:[{text:"\u6253\u5f00\u0047\u0069\u0074\u0065\u0065",onClick:function(c){window.open("https://gitee.com/"+GITEE_USERNAME+"/"+a+"/settings");window.location.reload()}}],modal:true,history:false})},1500)}function copyApiUrl(b,a){setCopyContent("#copy_"+((a==1)?UPDATE_API_NAME:NOTICE_API_NAME)+"_api_url","https://gitee.com/"+GITEE_USERNAME+"/"+REPOSITORY_PATH+"/raw/master/"+((a==1)?UPDATE_API_NAME:NOTICE_API_NAME),function(d,c){if(d){mdui.dialog({title:"\u5df2\u590d\u5236"+((a==1)?"\u66f4\u65b0":"\u516c\u544a")+"\u63a5\u53e3",content:'\u63a5\u53e3\u94fe\u63a5\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff0c\u5982\u65e0\u6cd5\u8bbf\u95ee\uff0c\u8bf7\u786e\u4fdd\u4ed3\u5e93\u5df2\u8bbe\u7f6e\u4e3a\u516c\u5f00\u3002\u004a\u0053\u004f\u004e\u53c2\u6570\u8be6\u60c5\u5982\u4e0b\uff1a\u0020<br/><br/><table class="mdui-table mdui-shadow-0"><thead><tr><th>\u5b57\u6bb5</th><th>\u7c7b\u578b</th><th>\u8bf4\u660e</th></tr></thead>'+((a==1)?"<tbody><tr><td><code>versionCode</code></td><td><code>int</code></td><td>\u5185\u90e8\u7248\u672c\u4ee3\u53f7</td></tr><tr><td><code>versionName</code></td><td><code>string</code></td><td>\u5916\u90e8\u516c\u5f00\u7248\u672c</td></tr><tr><td><code>minVersion</code></td><td><code>int</code></td><td>\u9700\u8981\u66f4\u65b0\u6700\u4f4e\u7248\u672c</td></tr><tr><td><code>targetVersion</code></td><td><code>int</code></td><td>\u9700\u8981\u66f4\u65b0\u7684\u6700\u9ad8\u7248\u672c</td></tr><tr><td><code>updateLog</code></td><td><code>string</code></td><td>\u66f4\u65b0\u65e5\u5fd7</td></tr><tr><td><code>downloadUrl</code></td><td><code>string</code></td><td>\u4e0b\u8f7d\u94fe\u63a5</td></tr><tr><td><code>updateTime</code></td><td><code>int</code></td><td>\u66f4\u65b0\u65f6\u95f4</td></tr></tbody>":"<tbody><tr><td><code>title</code></td><td><code>string</code></td><td>\u516c\u544a\u6807\u9898</td></tr><tr><td><code>message</code></td><td><code>string</code></td><td>\u516c\u544a\u5185\u5bb9</td></tr><tr><td><code>jumpUrl</code></td><td><code>string</code></td><td>\u8df3\u8f6c\u94fe\u63a5</td></tr><tr><td><code>cancelable</code></td><td><code>boolean</code></td><td>\u662f\u5426\u5141\u8bb8\u5173\u95ed\u516c\u544a</td></tr><tr><td><code>updateTime</code></td><td><code>int</code></td><td>\u66f4\u65b0\u65f6\u95f4</td></tr></tbody>")+"</table>",buttons:[{text:"\u6211\u77e5\u9053\u4e86"}]})}else{showToast("\u63a5\u53e3\u94fe\u63a5\u590d\u5236\u5931\u8d25")}})}function openEditDialog(a){EDIT_TYPE=(a==1)?UPDATE_API_NAME:NOTICE_API_NAME;$("#edit_json_dlg_form").hide();$("#edit_json_dlg_version").hide();$("#edit_json_dlg_cancelable").hide();$("#edit_json_dlg_save").hide();$("#edit_json_dlg_tle").hide();$("#edit_json_dlg_load_tle").show();$("#edit_json_dlg_load_tle").html("\u52a0\u8f7d\u4e2d\u002e\u002e\u002e");$("#edit_json_dlg_loading").show();EDIT_DIALOG=new mdui.Dialog("#edit_json_dialog",{history:false,modal:true});EDIT_DIALOG.open();getFiles(EDIT_TYPE,function(e,d){if(e){var c=Base64.decode(d.content);var b=JSON.parse(c);if(a==1){$("#edit_json_dlg_load_tle").html("\u66f4\u65b0\u7248\u672c");$("input[name=versionName]").val(b.versionName);$("input[name=versionCode]").val(b.versionCode);$("input[name=minVersion]").val(b.minVersion);$("input[name=targetVersion]").val(b.targetVersion);$("#edit_json_dlg_version").show();$("#edit_json_dlg_cont_tle").html("\u66f4\u65b0\u65e5\u5fd7");$("#edit_json_dlg_content").val(b.updateLog);$("#edit_json_dlg_content").attr("name","updateLog");$("#edit_json_dlg_url_tle").html("\u4e0b\u8f7d\u5730\u5740");$("#edit_json_dlg_url").val(b.downloadUrl);$("#edit_json_dlg_url").attr("name","downloadUrl")}else{$("#edit_json_dlg_tle").val(b.title);$("input[name=title]").val(b.title);$("#edit_json_dlg_cont_tle").html("\u516c\u544a\u5185\u5bb9");$("#edit_json_dlg_content").val(b.message);$("#edit_json_dlg_content").attr("name","message");$("#edit_json_dlg_url_tle").html("\u8df3\u8f6c\u5730\u5740");$("#edit_json_dlg_url").val(b.jumpUrl);$("#edit_json_dlg_url").attr("name","jumpUrl");if (b.cancelable){$('input[name=cancelable]').attr('checked', true);}else{$('input[name=cancelable]').removeAttr('checked');}$("#edit_json_dlg_cancelable").show();$("#edit_json_dlg_load_tle").hide();$("#edit_json_dlg_tle").show()}$("#edit_json_dlg_save").show();$("#edit_json_dlg_loading").hide();$("#edit_json_dlg_form").show()}else{showToast(JSON.stringify(d.error))}})}$("input[name=versionCode]").on("input",function(a){$("input[name=targetVersion]").val(a.target.value)});$("#edit_json_dlg_save").on("click",function(a){INITIALIZE_DIALOG=mdui.dialog({title:"\u8bf7\u8010\u5fc3\u7b49\u5f85",content:'<div class="mdui-valign"><div class="mdui-spinner mdui-spinner-colorful"></div><span class="mdui-m-l-1">\u6b63\u5728\u63d0\u4ea4\u540c\u6b65\u6570\u636e\u4e2d\u002e\u002e\u002e</span></div>',modal:true});mdui.mutation();getFiles(EDIT_TYPE,function(c,b){if(c){updateFiles(EDIT_TYPE,b.sha,getFormApiJson(),function(d,e){INITIALIZE_DIALOG.close();showToast((d)?"\u63a5\u53e3\u5df2\u66f4\u65b0":JSON.stringify(e.error));
EDIT_DIALOG.close();setTimeout(function(){window.location.reload()},1000)})}else{showToast(JSON.stringify(b.error))}})});function createFiles(b,e,a,c,d,f){$.ajax({method:"POST",url:"https://gitee.com/api/v5/repos/"+GITEE_USERNAME+"/"+a+"/contents/"+"/"+c,data:{access_token:GITEE_TOKEN,owner:GITEE_USERNAME,repo:a,path:"/"+c,content:d,message:"创建"+b+"接口文件"},success:function(h,g,i){if(f){f(true,JSON.parse(h))}},error:function(g){if(f){f(false,JSON.parse(g.responseText))}}})}function getFiles(a,b){$.ajax({method:"GET",url:"https://gitee.com/api/v5/repos/"+GITEE_USERNAME+"/"+REPOSITORY_PATH+"/contents/"+"/"+a,data:{access_token:GITEE_TOKEN,owner:GITEE_USERNAME,repo:REPOSITORY_PATH,path:"/"+a},success:function(d,c,e){if(b){b(true,JSON.parse(d))}},error:function(c){if(b){b(false,JSON.parse(c.responseText))}}})}function updateFiles(b,a,c,d){$.ajax({method:"PUT",url:"https://gitee.com/api/v5/repos/"+GITEE_USERNAME+"/"+REPOSITORY_PATH+"/contents/"+"/"+b,data:{access_token:GITEE_TOKEN,owner:GITEE_USERNAME,repo:REPOSITORY_PATH,path:"/"+b,content:Base64.encode(c),sha:a,message:"编辑"+name+"接口文件"},success:function(f,e,g){if(d){d(true,JSON.parse(f))}},error:function(e){if(d){d(false,JSON.parse(e.responseText))}}})}function removeFiles(b,a,c){$.ajax({method:"DELETE",url:"https://gitee.com/api/v5/repos/"+GITEE_USERNAME+"/"+REPOSITORY_PATH+"/contents/"+"/"+b,data:{access_token:GITEE_TOKEN,owner:GITEE_USERNAME,repo:REPOSITORY_PATH,path:"/"+b,sha:a,message:"删除"+b+"接口文件"},success:function(e,d,f){if(c){c(true,JSON.parse(e))}},error:function(d){if(c){c(false,JSON.parse(d.responseText))}}})}$("#gitee_key_btn_help").on("click",function(a){mdui.dialog({title:"\u4f7f\u7528\u8bf4\u660e",content:"\u0031\u002e\u0047\u0069\u0074\u0065\u0065\u9650\u5236\u79c1\u4eba\u4ee4\u724c\u4ec5\u80fd\u652f\u6301\u67e5\u770b\u4e00\u6b21\uff0c\u8bf7\u6ce8\u610f\u5907\u4efd\u548c\u4fdd\u7559\u4ee4\u724c\u3002<br/>\u0032\u002e\u65b0\u5efa\u4ee4\u724c\u987b\u6709\u0026\u0071\u0075\u006f\u0074\u003b\u0070\u0072\u006f\u006a\u0065\u0063\u0074\u0073\u0026\u0071\u0075\u006f\u0074\u003b\u6743\u9650\uff0c\u65e2\u67e5\u770b\u3001\u521b\u5efa\u3001\u66f4\u65b0\u4f60\u7684\u9879\u76ee\u7684\u6743\u9650\u3002<br/>\u0033\u002e\u672c\u540e\u53f0\u5c06\u4f1a\u4f7f\u7528\u4f60\u8bbe\u7f6e\u7684\u4ee4\u724c\u8fdb\u884c\u0047\u0069\u0074\u0065\u0065\u7684\u004f\u0070\u0065\u006e\u0041\u0070\u0069\u53bb\u64cd\u4f5c\u4ed3\u5e93\u6765\u8fbe\u5230\u76f8\u5173\u7684\u529f\u80fd\u3002<br/>\u0034\u002e\u4ee4\u724c\u5b58\u50a8\u5728\u672c\u5730\uff0c\u4e14\u6c38\u4e45\u6709\u6548\uff0c\u5982\u4e0d\u518d\u4f7f\u7528\u8bf7\u53ca\u65f6\u5220\u9664\u6216\u5728\u0047\u0069\u0074\u0065\u0065\u5220\u9664\u3002<br/>\u0035\u002e\u56e0\u0047\u0069\u0074\u0065\u0065\u9650\u5236\uff0c\u672c\u540e\u53f0\u5f53\u524d\u53ea\u652f\u6301\u66f4\u65b0\u548c\u516c\u544a\u7684\u63a5\u53e3\u529f\u80fd\uff0c\u4e0d\u4fdd\u8bc1\u80fd\u957f\u671f\u4f7f\u7528\uff0c\u89c6\u0047\u0069\u0074\u0065\u0065\u60c5\u51b5\u800c\u5b9a\u3002<br/>\u0036\u002e\u5982\u0047\u0069\u0074\u0065\u0065\u8981\u6c42\u5173\u505c\uff0c\u4f7f\u7528\u8005\u9700\u5c3d\u5feb\u505c\u6b62\u670d\u52a1\uff0c\u5426\u5219\uff0c\u6240\u6709\u8d23\u4efb\u5747\u7531\u4f7f\u7528\u8005\u5b8c\u5168\u627f\u62c5\u3002<br/>\u0037\u002e\u4f7f\u7528\u672c\u540e\u53f0\u5373\u4ee3\u8868\u4f60\u5df2\u540c\u610f\u548c\u77e5\u6653\u62c5\u8d23\u5e76\u9075\u5b88\u76f8\u5173\u7684\u534f\u8bae\uff0c\u5982\u53d1\u751f\u6cd5\u5f8b\u95ee\u9898\u4e0e\u672c\u540e\u53f0\u65e0\u5173\uff0c\u6982\u4e0d\u8d1f\u8d23\u3002<br/>\u0038\u002e\u5982\u9700\u5e2e\u52a9\u6216\u6709\u95ee\u9898\u548c\u5efa\u8bae\u53cd\u9988\u8bf7\u52a0\u0051\u0051\u4ea4\u6d41\u7fa4\uff1a\u0035\u0033\u0035\u0038\u0032\u0034\u0039\u0032\u0039",buttons:[{text:"\u6211\u77e5\u9053\u4e86"}]})});$("#gitee_key_btn_save").on("click",function(b){var a=$("#gitee_key_input").val();if(!a){showToast("\u8bf7\u586b\u5199\u0047\u0069\u0074\u0065\u0065\u4ee4\u724c");return}if(!/^(?![0-9]+$)(?![a-z]+$)[0-9a-z]{32}$/.test(a)){showToast("\u4ee4\u724c\u683c\u5f0f\u4e0d\u6b63\u786e");return}$.ajax({method:"GET",url:"https://gitee.com/api/v5/user",data:{access_token:a},success:function(d,c,f){var e=JSON.parse(d);localStorage.setItem("gitee_username",e.login);localStorage.setItem("gitee_token",a);showToast("\u4ee4\u724c\u5df2\u50a8\u5b58\u5230\u672c\u5730");setTimeout(function(){window.location.reload()},1000)},error:function(c){showToast("\u4ee4\u724c\u4e0d\u6b63\u786e")}})});$("#toolbar_menu_logout").on("click",function(a){mdui.dialog({title:"\u9000\u51fa\u767b\u5f55",content:"\u9000\u51fa\u767b\u5f55\u5c06\u4f1a\u5220\u9664\u5df2\u5b58\u50a8\u7684\u4ee4\u724c\uff0c\u662f\u5426\u786e\u8ba4\u9000\u51fa\uff1f",buttons:[{text:"\u6211\u518d\u60f3\u60f3"},{text:"\u9000\u51fa\u5e76\u6e05\u9664",onClick:function(b){localStorage.removeItem("gitee_username");localStorage.removeItem("gitee_token");showToast("\u5df2\u6e05\u9664\u50a8\u5b58\u7684\u4ee4\u724c");setTimeout(function(){window.location.reload()},1000)}}]})});$('#toolbar_menu_repository').on('click',function(a){window.open('https://gitee.com/'+GITEE_USERNAME+'/'+REPOSITORY_PATH);});function showToast(a){mdui.snackbar({message:a})
}function getCookies(b){return(decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(b).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null)}function setCookies(e,d,f){e=e+"="+escape(d);!f?(e+="; expires=Fri,31 Dec 9999 23:59:59 GMT"):((d=new Date()),d.setTime(d.getTime()+1000*f),(e+="; expires="+d.toGMTString()));document.cookie=e+"; path=/; "}function removeCookies(b){document.cookie=b+"=; expires=Thu,01 Jan 1970 00:00:00 UTC; path=/; "}function isComputerUserAgent(){var e=navigator.userAgent;var d=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];var g=true;for(var f=0;f<d.length;f++){if(e.indexOf(d[f])>0){g=false;break}}if(window.screen.width<599){g=false}return g}function stampToDate(t,s){s=s||'Y-m-d';var r=function(a){if(a<10){return'0'+a}return a};var q=t?new Date(t):new Date();var p=q.getFullYear();var o=r(q.getMonth()+1);var n=r(q.getDate());var m=r(q.getHours());var l=r(q.getMinutes());var d=r(q.getSeconds());return s.replace(/Y|m|d|H|i|s/ig,function(a){return({Y:p,m:o,d:n,H:m,i:l,s:d})[a]})}function setCopyContent(b,a,d){var c=new ClipboardJS(b,{text:function(e){return a}});c.on("success",function(f){d(true,f);c.destroy()});c.on("error",function(f){d(false,f);c.destroy()})}function serializeArray(d){var b,c,a=[],e=function(f){if(f.forEach){return f.forEach(e)}a.push({name:b,value:f})};if(d[0]){$.each(d[0].elements,function(f,g){c=g.type,b=g.name;if(b&&g.nodeName.toLowerCase()!="fieldset"&&!g.disabled&&c!="submit"&&c!="reset"&&c!="button"&&c!="file"&&c!="checkbox"&&(c!="radio"||g.checked)){e($(g).val())}else{if(c=="checkbox"){e(g.checked)}}})}return a}function getFormApiJson(){var a={};var b=serializeArray($("#edit_json_dlg_form"));if(EDIT_TYPE==NOTICE_API_NAME){a["title"]=$("#edit_json_dlg_tle").val()}$.each(b,function(d,f){var c=f.name;var e=f.value;if(EDIT_TYPE==UPDATE_API_NAME&&!inArray(["title","cancelable"],c)){a[c]=e}else{if(EDIT_TYPE==NOTICE_API_NAME&&!inArray(["versionCode","versionName","minVersion","targetVersion"],c)){a[c]=e}}});a["updateTime"]=new Date().getTime();return JSON.stringify(a)}function inArray(d,c){for(var e=0;e<d.length;e++){if(c===d[e]){return true}}return false};